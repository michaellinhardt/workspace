# AeroSpace Tiling Window Manager Documentation

## Overview

AeroSpace is an i3-like tiling window manager for macOS. It provides keyboard-driven window management with a tree-based layout system, fast workspace switching, and extensive customization through TOML configuration.

**Key Characteristics:**
- Does not require disabling SIP (System Integrity Protection)
- Uses plain text TOML configuration (dotfiles friendly)
- Reimplements macOS Spaces as "Workspaces" for better control
- Currently in Public Beta - usable as daily driver

**Installation:**
```bash
brew install --cask nikitabobko/tap/aerospace
```

---

## 1. Main Features and Capabilities

### Core Features
- **Tree-based window management**: Windows and containers organize hierarchically within workspaces
- **Fast workspace switching**: No animations, instant transitions
- **Keyboard-driven**: Full control without mouse
- **Multiple binding modes**: Separate keybinding contexts (main, service, resize, etc.)
- **Floating window support**: Windows outside the tiling tree but still focusable
- **Multi-monitor support**: Workspaces can be assigned to specific monitors

### Layout Capabilities
- Automatic tiling of windows
- Four layout types: `h_tiles`, `v_tiles`, `h_accordion`, `v_accordion`
- Container normalization (auto-flattening single-child containers)
- Per-workspace and per-monitor configurations

### Workspace Management
- Unlimited workspaces (macOS Spaces limited to ~16)
- Workspaces form a shared pool across monitors
- Persistent empty workspaces option
- Assign specific workspaces to monitors via patterns

---

## 2. How It Works

### Tiling Modes

| Layout | Description |
|--------|-------------|
| `h_tiles` | Windows arranged horizontally side-by-side |
| `v_tiles` | Windows stacked vertically |
| `h_accordion` | Horizontal overlapping with directional padding indicators |
| `v_accordion` | Vertical overlapping with directional padding indicators |

### Tree Structure
- Each workspace contains a tree of containers and windows
- Containers have: layout type (tiles/accordion) and orientation (horizontal/vertical)
- Single-child containers auto-flatten by default (configurable)
- Floating windows determined by smallest containing tiling container

### Workspace Mechanism
- Inactive workspace windows are positioned outside visible screen area
- Switching workspace moves windows back to visible area
- Each workspace assigned to a monitor; same workspace cannot display on multiple monitors simultaneously

### Navigation
```
focus left|down|up|right    # Directional navigation
focus dfs-next|dfs-prev     # Tree-based navigation (depth-first search)
```

---

## 3. Configuration Options

### Config File Locations
1. `~/.aerospace.toml` (primary)
2. `${XDG_CONFIG_HOME}/aerospace/aerospace.toml` (default: `~/.config/aerospace/aerospace.toml`)

### Configuration Structure

```toml
# Startup Commands
after-login-command = []           # Runs after macOS login (requires start-at-login = true)
after-startup-command = []         # Runs after AeroSpace starts
start-at-login = true              # Auto-start at login

# Normalization
enable-normalization-flatten-containers = true
enable-normalization-opposite-orientation-for-nested-containers = true

# Gaps Configuration
[gaps]
inner.horizontal = 10
inner.vertical = 10
outer.left = 10
outer.bottom = 10
outer.top = 60                     # Space for status bar (SketchyBar)
outer.right = 10

# Binding Modes
[mode.main.binding]
alt-h = 'focus left'
alt-j = 'focus down'
alt-k = 'focus up'
alt-l = 'focus right'
alt-1 = 'workspace 1'
alt-shift-1 = 'move-node-to-workspace 1'

[mode.service.binding]
esc = ['reload-config', 'mode main']
r = ['flatten-workspace-tree', 'mode main']
```

### Key Configuration Sections

| Section | Purpose |
|---------|---------|
| `after-startup-command` | Launch integrations (SketchyBar, JankyBorders) |
| `exec-on-workspace-change` | Callbacks for workspace switches |
| `on-window-detected` | Auto-assign apps to workspaces |
| `on-focus-changed` | Execute on any focus change |
| `on-focused-monitor-changed` | Trigger on monitor focus change |
| `[gaps]` | Inner/outer spacing configuration |
| `[mode.<name>.binding]` | Keybinding definitions per mode |

### Keyboard Layout Presets
- `qwerty` (default)
- `dvorak`
- `colemak`

---

## 4. Integration Points

### SketchyBar Integration

SketchyBar displays workspace indicators. AeroSpace does not provide native UI for workspace display.

**AeroSpace Config (`aerospace.toml`):**
```toml
# Start SketchyBar with AeroSpace
after-startup-command = ['exec-and-forget sketchybar']

# Notify SketchyBar on workspace change
exec-on-workspace-change = ['/bin/bash', '-c',
  'sketchybar --trigger aerospace_workspace_change FOCUSED_WORKSPACE=$AEROSPACE_FOCUSED_WORKSPACE'
]
```

**SketchyBar Config (`sketchybarrc`):**
```bash
sketchybar --add event aerospace_workspace_change

for sid in $(aerospace list-workspaces --all); do
    sketchybar --add item space.$sid left \
        --subscribe space.$sid aerospace_workspace_change \
        --set space.$sid \
            background.color=0x44ffffff \
            background.corner_radius=5 \
            background.height=20 \
            background.drawing=off \
            label="$sid" \
            click_script="aerospace workspace $sid" \
            script="$CONFIG_DIR/plugins/aerospace.sh $sid"
done
```

**Plugin Script (`~/.config/sketchybar/plugins/aerospace.sh`):**
```bash
#!/usr/bin/env bash
if [ "$1" = "$FOCUSED_WORKSPACE" ]; then
    sketchybar --set $NAME background.drawing=on
else
    sketchybar --set $NAME background.drawing=off
fi
```

**Gap Configuration for SketchyBar:**
```toml
[gaps]
outer.top = 60    # Adjust based on SketchyBar height
```

### JankyBorders Integration

JankyBorders adds colored borders to highlight the focused window.

**Installation:**
```bash
brew tap FelixKratz/formulae
brew install borders
```

**AeroSpace Config:**
```toml
after-startup-command = [
    'exec-and-forget borders active_color=0xffe1e3e4 inactive_color=0xff494d64 width=5.0'
]
```

**Configuration Options:**
| Option | Description |
|--------|-------------|
| `active_color` | Border color for focused window (hex ARGB) |
| `inactive_color` | Border color for unfocused windows (hex ARGB) |
| `width` | Border thickness in pixels |
| `style` | Border style (`round` or default) |
| `hidpi` | HiDPI mode (`on`/`off`) |

**Note:** JankyBorders has built-in duplicate process detection, preventing multiple instances on AeroSpace restart.

### Environment Variables for Integration

Available in `exec-on-workspace-change`:
- `AEROSPACE_FOCUSED_WORKSPACE` - Currently focused workspace name
- `AEROSPACE_PREV_WORKSPACE` - Previously focused workspace name

### Other Integrations
- **Simple-Bar**: Uses Ubersicht widget refresh via osascript
- **Raycast Extension**: Command searching (https://www.raycast.com/limonkufu/aerospace)
- **BetterTouchTool**: Trackpad gestures for workspace navigation

---

## 5. Key Commands and Shortcuts

### Navigation Commands
| Command | Description |
|---------|-------------|
| `focus left\|down\|up\|right` | Move focus directionally |
| `focus dfs-next\|dfs-prev` | Tree-based navigation |
| `focus-back-and-forth` | Toggle between current and previous window |
| `focus-monitor left\|down\|up\|right\|next\|prev` | Focus another monitor |

### Window Management Commands
| Command | Description |
|---------|-------------|
| `move left\|down\|up\|right` | Move focused window |
| `resize smart\|width\|height [+\|-]<number>` | Resize window |
| `layout h_tiles\|v_tiles\|h_accordion\|v_accordion` | Set layout |
| `layout tiles\|accordion` | Toggle layout type |
| `layout horizontal\|vertical` | Toggle orientation |
| `fullscreen [on\|off]` | Toggle fullscreen |
| `close` | Close focused window |
| `swap left\|down\|up\|right` | Swap with adjacent window |

### Workspace Commands
| Command | Description |
|---------|-------------|
| `workspace <name>` | Switch to workspace |
| `workspace next\|prev` | Navigate workspaces |
| `workspace-back-and-forth` | Toggle to previous workspace |
| `move-node-to-workspace <name>` | Move window to workspace |
| `move-workspace-to-monitor <direction>` | Move workspace to monitor |
| `summon-workspace <name>` | Bring workspace to current monitor |

### Container Commands
| Command | Description |
|---------|-------------|
| `join-with left\|down\|up\|right` | Group with adjacent window |
| `split horizontal\|vertical\|opposite` | Create split container |
| `flatten-workspace-tree` | Simplify workspace hierarchy |
| `balance-sizes` | Equalize window dimensions |

### System Commands
| Command | Description |
|---------|-------------|
| `reload-config` | Reload configuration |
| `mode <name>` | Switch binding mode |
| `enable toggle\|on\|off` | Toggle AeroSpace |
| `exec-and-forget '<command>'` | Run async bash command |

### Query Commands (CLI Only)
| Command | Description |
|---------|-------------|
| `list-windows` | List windows with filters |
| `list-workspaces --all` | List all workspaces |
| `list-monitors` | List displays |
| `list-apps` | List running applications |
| `config --get <key>` | Query config values |

### Default Keybindings (Main Mode)
```
alt-h/j/k/l          Focus left/down/up/right
alt-shift-h/j/k/l    Move window left/down/up/right
alt-[1-9]            Switch to workspace 1-9
alt-shift-[1-9]      Move window to workspace 1-9
alt-minus/equal      Resize smaller/larger
alt-enter            Open terminal (if configured)
alt-shift-semicolon  Enter service mode
```

---

## 6. Official Documentation Links

| Resource | URL |
|----------|-----|
| **GitHub Repository** | https://github.com/nikitabobko/AeroSpace |
| **Official Guide** | https://nikitabobko.github.io/AeroSpace/guide |
| **Commands Reference** | https://nikitabobko.github.io/AeroSpace/commands |
| **Goodies (Integrations)** | https://nikitabobko.github.io/AeroSpace/goodies |
| **Default Config Example** | https://github.com/nikitabobko/AeroSpace/blob/main/docs/config-examples/default-config.toml |
| **i3-like Config Example** | https://github.com/nikitabobko/AeroSpace/blob/main/docs/config-examples/i3-like-config-example.toml |

---

## Quick Reference: Complete Integration Setup

```toml
# ~/.aerospace.toml - Full integration example

start-at-login = true

after-startup-command = [
    'exec-and-forget sketchybar',
    'exec-and-forget borders active_color=0xffe1e3e4 inactive_color=0xff494d64 width=5.0'
]

exec-on-workspace-change = ['/bin/bash', '-c',
    'sketchybar --trigger aerospace_workspace_change FOCUSED_WORKSPACE=$AEROSPACE_FOCUSED_WORKSPACE'
]

[gaps]
inner.horizontal = 10
inner.vertical = 10
outer.left = 10
outer.bottom = 10
outer.top = 45    # Space for SketchyBar
outer.right = 10

[mode.main.binding]
alt-h = 'focus left'
alt-j = 'focus down'
alt-k = 'focus up'
alt-l = 'focus right'
alt-shift-h = 'move left'
alt-shift-j = 'move down'
alt-shift-k = 'move up'
alt-shift-l = 'move right'
alt-1 = 'workspace 1'
alt-2 = 'workspace 2'
alt-shift-1 = 'move-node-to-workspace 1'
alt-shift-2 = 'move-node-to-workspace 2'
```
