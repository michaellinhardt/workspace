#!/bin/bash

# --- Bar Configuration ---
sketchybar --bar \
  height=32 \
  position=top \
  color=0xff1e1e2e \
  border_color=0xff313244 \
  border_width=0 \
  corner_radius=0 \
  padding_left=10 \
  padding_right=10

# --- Default Item Settings ---
sketchybar --default \
  icon.font="Hack Nerd Font:Bold:14.0" \
  icon.color=0xffcdd6f4 \
  label.font="Hack Nerd Font:Bold:14.0" \
  label.color=0xffcdd6f4 \
  padding_left=5 \
  padding_right=5

# --- AeroSpace Workspace Items ---
# Register custom event for AeroSpace
sketchybar --add event aerospace_workspace_change

# Create workspace items for workspaces 1-5
for sid in 1 2 3 4 5; do
  sketchybar --add item space.$sid left \
    --set space.$sid \
      icon="$sid" \
      icon.padding_left=10 \
      icon.padding_right=10 \
      background.color=0xff313244 \
      background.corner_radius=5 \
      background.height=24 \
      background.drawing=off \
      click_script="aerospace workspace $sid" \
      script="$CONFIG_DIR/plugins/aerospace.sh $sid" \
    --subscribe space.$sid aerospace_workspace_change
done

# --- Right Side Items ---
# Clock
sketchybar --add item clock right \
  --set clock \
    update_freq=30 \
    script="$CONFIG_DIR/plugins/clock.sh"

# Battery (optional)
sketchybar --add item battery right \
  --set battery \
    update_freq=120 \
    script="$CONFIG_DIR/plugins/battery.sh"

# Front App
sketchybar --add item front_app left \
  --set front_app \
    icon.drawing=off \
    script="$CONFIG_DIR/plugins/front_app.sh" \
  --subscribe front_app front_app_switched

# --- Initialize ---
sketchybar --update
